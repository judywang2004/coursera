define("bundles/certificate-enroll/components/FinaidLink",["require","exports","module","react-with-addons","bundles/catalogP/models/course","bundles/epic/client","bundles/finaid/constants","bundles/naptimejs/resources/courses.v1","bundles/payments/components/RedirectToCheckout","js/app/loggerSingleton","js/lib/coursera.react-intl","js/lib/coursera.redirect","bundles/page/components/TrackedOnLinkClickDiv","i18n!nls/certificate-enroll","pages/open-course/common/models/course"],function(require,exports,module){"use strict";function _defaults(e,o){for(var i=Object.getOwnPropertyNames(o),t=0;t<i.length;t++){var r=i[t],n=Object.getOwnPropertyDescriptor(o,r);n&&n.configurable&&void 0===e[r]&&Object.defineProperty(e,r,n)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var r=function(){function defineProperties(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=function get(i,c,l){var r=!0;e:for(;r;){var t=i,s=c,a=l;r=!1,null===t&&(t=Function.prototype);var e=Object.getOwnPropertyDescriptor(t,s);if(void 0===e){var n=Object.getPrototypeOf(t);if(null===n)return void 0;i=n,c=s,l=a,r=!0,e=n=void 0;continue e}if("value"in e)return e.value;var o=e.get;if(void 0===o)return void 0;return o.call(a)}},e=require("react-with-addons"),o=require("bundles/catalogP/models/course"),i=require("bundles/epic/client"),s=require("bundles/finaid/constants"),t=require("bundles/naptimejs/resources/courses.v1"),a=require("bundles/payments/components/RedirectToCheckout"),c=require("js/app/loggerSingleton"),l=require("js/lib/coursera.react-intl"),u=l.FormattedHTMLMessage,p=require("js/lib/coursera.redirect"),d=require("bundles/page/components/TrackedOnLinkClickDiv"),f=require("i18n!nls/certificate-enroll"),b=require("pages/open-course/common/models/course"),g=function(l){function FinaidLink(){var e=this;_classCallCheck(this,FinaidLink),n(Object.getPrototypeOf(FinaidLink.prototype),"constructor",this).apply(this,arguments),this.state={redirectToFinaid:!1},this.handleClick=function(t){var r=e.getCourseData();if("A"===t.target.tagName){var n=i.get("Finaid","showMultistepFinaidApplication");n?p.setLocation(s.finaidLandingPagePathWithSlug(r.slug)):e.setState({redirectToFinaid:!0})}}}return _inherits(FinaidLink,l),r(FinaidLink,[{key:"getCourseData",value:function getCourseData(){return this.props.course||{id:this.context.course.get("id"),slug:this.context.course.get("slug")}}},{key:"render",value:function render(){if(!this.props.course&&!this.context.course)return c.error("Cannot render finaid link without course"),!1;var t=this.getCourseData();return e.createElement("div",{className:"rc-FinaidLink"},e.createElement("p",{className:"body-1-text",onClick:this.handleClick},e.createElement(d,{trackingName:"finaid"},this.props.children||e.createElement(u,{message:f('Financial Aid is available for learners who cannot afford the fee.\n                  <a href="#">Learn more and apply.</a>')}))),this.state.redirectToFinaid&&e.createElement(a,{courseId:this.props.isSpark?this.props.selectedSessionId:t.id,showModal:!1,shouldOpenFinaid:!0,isSpark:this.props.isSpark}))}}],[{key:"propTypes",value:{children:e.PropTypes.any,isSpark:e.PropTypes.bool,selectedSessionId:e.PropTypes.string,course:e.PropTypes.instanceOf(t)},enumerable:!0},{key:"contextTypes",value:{course:e.PropTypes.oneOfType([b,o])},enumerable:!0},{key:"defaultProps",value:{isSpark:!1},enumerable:!0}]),FinaidLink}(e.Component);module.exports=g});